name: Check Helm Command

on:
  push:
    branches:
      - master

jobs:
  check_helm_command:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Install Helm
      run: |
        curl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bash

    - name: Check Helm version
      run: |
        helm version
    - name: List the Pods of the Cluster
      run: |
          kubectl get po -A

    - name: uninstall previous gatekeeper
      run: | 
            helm delete gatekeeper --namespace gatekeeper-system
    - name: uninstall previous gatekeeper CRDs
      run: |
          kubectl delete crd -l gatekeeper.sh/system=yes

    
      
      
        

        
        

        
    

    
      
      
      

    

          

    

         

